### Kubernetes (>= 1.6)
 - kubeadm
 - Tectonic (coreos)
 - kops

### PX deploy
 - DaemonSet on all nodes including master
    - [example-spec](http://install.portworx.com/?kvdb=etcd://192.168.33.10:4001&diface=enp0s8&miface=enp0s8&drives=/dev/sdc&cluster=harsh-local)
 - DaemonSet with zero storage on master, daemonset with storage on other nodes
 - We use host network, no POD networks
 - Provision requests received on master node on localhost:9001

### Debug PX deploy
* List PX pods: `kubectl get pods -l name=portworx -n kube-system`
* Describe PX pods: `kubectl describe pods -l name=portworx -n kube-system`
* Logs of all PX pods: `kubectl logs -l name=portworx -n kube-system --tail=800`
* Follow logs of a particular px pod: `kubectl logs -w <pod-name> -n kube-system`
* Check for custom taints on minions
* Check for pod restarts
* Check network on kube-controller-manager on master node
* Standard px issues:
  - etcd
  - firewalls
  - selinux
  - docker mountflags

### Volume lifecycle
* Create, Delete generated by Kubernetes controller manager on master node.
* Requests sent to localhost:9001
* Setup and TearDown sent to kubelet on each minion. So those logs are on kubelet on those nodes.
* Setup: Attach, Mount
* TearDown: Unmount, Detach
* Dynamically provsioned volumes
  - PVC's created based on StorageClass
  - [example-spec](https://raw.githubusercontent.com/harsh-px/k8s-utils/master/scripts/mysql/px-mysql.yaml)

### Apps
* Deployments
  - replicas based Pods
  - During node failures/decommissions, pod moves from one minion to another. TearDown and Setup invoked on the PVC.
* StatefulSets